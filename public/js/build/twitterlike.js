var Main=React.createClass({displayName:"Main",getInitialState:function(){return{data:[]}},componentDidMount:function(){this.getPosts(),setInterval(this.getPosts,this.props.refreshInt)},getPosts:function(){$.ajax({url:this.props.url,dataType:"json",success:this.onPostsCallSuccess,error:this.onPostsCallError})},onPostsCallSuccess:function(e){this.setState({data:e})},onPostsCallError:function(e,t,a){console.error(this.props.url,t,a.toString())},onNewPost:function(e){var t=this.state.data,a=t.concat([e]);this.setState({data:a}),$.ajax({url:this.props.url,dataType:"json",type:"POST",data:e,success:this.onPostsCallSuccess,error:this.onPostsCallError})},render:function(){return React.createElement("div",{className:"main"},React.createElement(NewStatusForm,{onNewPost:this.onNewPost}),React.createElement(StatusList,{data:this.state.data}))}}),StatusList=React.createClass({displayName:"StatusList",render:function(){var e=_.sortBy(this.props.data,"created_time").reverse();return e=e.map(function(e){return React.createElement("li",{className:"list-group-item"},React.createElement(StatusPost,{message:e.message,created:e.created_time,username:e.username},e.message))}),React.createElement("ul",{className:"list-group"},e)}}),NewStatusForm=React.createClass({displayName:"NewStatusForm",handleSubmit:function(e){e.preventDefault();var t=this.refs.username,a=this.refs.message,s=React.findDOMNode(t).value.trim(),r=React.findDOMNode(a).value.trim();s&&r&&(this.props.onNewPost({username:s,message:r,created_time:+new Date}),React.findDOMNode(t).value="",React.findDOMNode(a).value="")},render:function(){return React.createElement("form",{className:"form-horizontal center-block",onSubmit:this.handleSubmit},React.createElement("input",{className:"form-control input-lg",type:"text",placeholder:"Your username",ref:"username"}),React.createElement("div",{className:"input-group"},React.createElement("input",{className:"form-control input-lg",placeholder:"What's happening?",ref:"message",type:"text"}),React.createElement("div",{className:"input-group-btn"},React.createElement("input",{className:"btn btn-lg btn-primary",type:"submit",value:"Post"}))))}}),StatusPost=React.createClass({displayName:"StatusPost",render:function(){return React.createElement("div",{className:"status-post"},React.createElement("h4",null,this.props.username),React.createElement("p",null,this.props.message),React.createElement("small",{className:"text-muted"},moment(parseInt(this.props.created)).fromNow()))}});React.render(React.createElement(Main,{url:"posts.json",refreshInt:3e3}),document.getElementById("main"));